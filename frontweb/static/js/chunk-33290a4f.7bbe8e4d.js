(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33290a4f"],{"26ef":function(e,t,a){},"404c":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"筛选条件",visible:e.visible,width:"40%","append-to-body":"","before-close":e.handleCancel}},[a("el-form",{attrs:{"label-width":"80px",model:e.form}},[a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动区域"}},[a("el-input",{model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动形式"}},[a("el-input",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)},n=[],l={props:{visible:{type:Boolean,default:!1},defaultData:{type:Object,default:function(){return{}}}},data:function(){return{form:{}}},watch:{defaultData:{handler:function(e){for(var t in e)this.form[t]=e[t]},immediate:!0}},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){this.$emit("selected",this.form),this.$emit("update:visible",!1)}}},s=l,o=a("2877"),r=Object(o["a"])(s,i,n,!1,null,null,null);t["a"]=r.exports},4080:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"datasource-list-container"},[e.showSearch?a("div",{staticClass:"datasource-search"},[a("AppSearch",{staticClass:"datasource-search-input",model:{value:e.form.query,callback:function(t){e.$set(e.form,"query",t)},expression:"form.query"}}),e._v(" "),a("svg-icon",{staticClass:"datasource-search-filter",attrs:{"icon-class":"filter"},on:{click:e.showFilterDialog}})],1):e._e(),e._v(" "),a("div",{staticClass:"datasource-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"datasourceList",staticClass:"app-list-table",class:e.tableClassCombined,attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"",height:e.tableHeight},on:{"selection-change":e.handleSelectionChange}},[e.showSelection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"文件名"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.title)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"关联接口/流程"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.interfacename)+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"修改时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("parseToDate")(t.row.updated))+"\n        ")]}}])}),e._v(" "),e.showOperation?a("el-table-column",{attrs:{label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"operation-button-group"},[a("span",{on:{click:function(a){return e.uploadData(t.row)}}},[e._v("上传")]),e._v(" "),a("span",{on:{click:function(a){return e.downloadData(t.row)}}},[e._v("下载")]),e._v(" "),a("span",{on:{click:function(a){return e.deleteData(t.row)}}},[e._v("删除")]),e._v(" "),a("span",{attrs:{type:"success"},on:{click:function(a){return e.bindData(t.row)}}},[e._v("绑定")])])}}],null,!1,380106861)}):e._e()],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getDatasourceList}}),e._v(" "),a("FilterDialog",{attrs:{visible:e.filterDialogVisible,"default-data":e.filterForm},on:{"update:visible":function(t){e.filterDialogVisible=t},selected:e.handleFilterSelected}}),e._v(" "),e.showOperation?a("el-dialog",{attrs:{title:"选择绑定接口",visible:e.interfaceVisible,"before-close":function(t){return e.interfaceVisible=!1},"append-to-body":"",width:"80%"}},[a("InterfaceList",{ref:"interfaceList",attrs:{"table-height":"calc(100vh - 25vw)","show-operation":!1,"show-selection":"","single-select":"","table-class":"app-list-table"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.interfaceVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmChoose}},[e._v("确 定")])],1)],1):e._e()],1)])},n=[],l=a("db72"),s=a("75fc"),o=a("5ac2"),r=a("333d"),c=a("404c"),u=a("b964"),f={name:"DatasourceList",components:{AppSearch:o["a"],Pagination:r["a"],FilterDialog:c["a"],InterfaceList:function(){return Promise.all([a.e("chunk-178615a6"),a.e("chunk-7854879d")]).then(a.bind(null,"9fbe"))}},props:{appendParams:{type:Object,default:function(){return{}}},tableHeight:{type:String,default:"auto"},tableClass:{type:[String,Array],default:""},showSelection:{type:Boolean,default:!1},showSearch:{type:Boolean,default:!1},showOperation:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},data:function(){return{form:{query:""},list:null,total:0,listLoading:!0,listQuery:{page:1,limit:20},filterDialogVisible:!1,filterForm:{name:"zw"},currDatasource:null,interfaceVisible:!1}},computed:{tableClassCombined:function(){var e;return e="string"===typeof this.tableClass?[this.tableClass]:this.tableClass,[].concat(Object(s["a"])(e),[this.singleSelect?"app-single-select-table":""])}},created:function(){this.getDatasourceList()},methods:{getDatasourceList:function(){var e=this;this.listLoading=!0,Object(u["b"])(Object(l["a"])({page:this.listQuery.page,page_size:this.listQuery.limit},this.appendParams)).then((function(t){e.list=t.data.results,e.total=t.data.count,e.listLoading=!1}))},getSelection:function(){return this.$refs.datasourceList.selection},showFilterDialog:function(){this.filterDialogVisible=!0},handleFilterSelected:function(e){this.filterForm=e},uploadData:function(e){this.$emit("editDatasource",e)},downloadData:function(e){window.open(e.file_name)},deleteData:function(e){var t=this;this.$confirm("将删除数据源, 是否继续?","提示").then((function(a){var i=[e.id];Object(u["a"])({ids:i}).then((function(e){t.$message({type:"success",message:"删除成功"}),t.getDatasourceList()})).catch((function(e){}))}))},bindData:function(e){this.interfaceVisible=!0,this.currDatasource=e},handleConfirmChoose:function(){var e=this,t=this.$refs.interfaceList.getSelection(),a=t[0].id;Object(u["c"])({id:this.currDatasource.id},{interface:a}).then((function(t){e.interfaceVisible=!1,e.$message({type:"success",message:"绑定成功"}),e.$refs.interfaceList.clearSelection()}))},handleSelectionChange:function(e){if(this.singleSelect&&e.length>1){var t=e.pop();this.$refs.datasourceList.clearSelection(),this.$refs.datasourceList.toggleRowSelection(t,!0)}this.$emit("selection-change",e)}}},d=f,p=(a("b95a"),a("2877")),h=Object(p["a"])(d,i,n,!1,null,"f847e5d2",null);t["default"]=h.exports},b95a:function(e,t,a){"use strict";var i=a("26ef"),n=a.n(i);n.a}}]);