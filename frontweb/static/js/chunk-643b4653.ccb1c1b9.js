(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-643b4653"],{"1af6":function(e,t,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1ef9":function(e,t,n){"use strict";var r=n("35cc"),a=n.n(r);a.a},2226:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"q",(function(){return c})),n.d(t,"e",(function(){return o})),n.d(t,"m",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"p",(function(){return f})),n.d(t,"d",(function(){return d})),n.d(t,"i",(function(){return m})),n.d(t,"k",(function(){return h})),n.d(t,"f",(function(){return p})),n.d(t,"n",(function(){return v})),n.d(t,"g",(function(){return g})),n.d(t,"o",(function(){return b})),n.d(t,"c",(function(){return x})),n.d(t,"h",(function(){return _}));var r=n("b775");function a(e){return Object(r["a"])({url:"/interfacemanagement/modules/",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/interfacemanagement/modules/",method:"post",data:e})}function c(e,t){return Object(r["a"])({url:"/interfacemanagement/modules/".concat(e.id,"/"),method:"put",data:t})}function o(e,t){return Object(r["a"])({url:"/interfacemanagement/modules/".concat(e.id,"/"),method:"delete",data:t})}function s(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/",method:"get",params:e})}function u(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/".concat(e.id,"/"),method:"get"})}function l(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/",method:"post",data:e})}function f(e,t){return Object(r["a"])({url:"/interfacemanagement/interfaces/".concat(e.id,"/"),method:"put",data:t})}function d(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/",method:"delete",data:e})}function m(){return Object(r["a"])({url:"/interfacemanagement/keys/",method:"get"})}function h(e,t){return Object(r["a"])({url:"/interfacemanagement/interfaces/case/".concat(e.id,"/"),method:"get",params:t})}function p(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/execute/",method:"post",data:e})}function v(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/end/",method:"post",data:e})}function g(e){return Object(r["a"])({url:"/interfacemanagement/execute/result/".concat(e.id,"/"),method:"get"})}function b(e){return Object(r["a"])({url:"interfacemanagement/interfaces/accessories/",method:"post",data:e})}function x(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/accessories/",method:"delete",data:e})}function _(e){return Object(r["a"])({url:"/interfacemanagement/interfaces/accessories/",method:"get",params:e})}},"35cc":function(e,t,n){},3953:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("774e"),a=n.n(r),i=n("c8bb"),c=n.n(i);function o(e){if(c()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return a()(e)}},"549b":function(e,t,n){"use strict";var r=n("d864"),a=n("63b6"),i=n("241e"),c=n("b0dc"),o=n("3702"),s=n("b447"),u=n("20fd"),l=n("7cd6");a(a.S+a.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,f,d=i(e),m="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,v=void 0!==p,g=0,b=l(d);if(v&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==b||m==Array&&o(b))for(t=s(d.length),n=new m(t);t>g;g++)u(n,g,v?p(d[g],g):d[g]);else for(f=b.call(d),n=new m;!(a=f.next()).done;g++)u(n,g,v?c(f,p,[a.value,g],!0):a.value);return n.length=g,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"75fc":function(e,t,n){"use strict";var r=n("a745"),a=n.n(r);function i(e){if(a()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var c=n("3953");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function s(e){return i(e)||Object(c["a"])(e)||o()}n.d(t,"a",(function(){return s}))},"774e":function(e,t,n){e.exports=n("d2d5")},"81c5":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"run-interface-container"},[n("div",[n("div",[n("div",{staticClass:"run-interface-title mgt0"},[e._v("\n        运行-环境选择\n      ")]),e._v(" "),n("el-form",{ref:"excuteForm",attrs:{"label-position":"left",model:e.form,rules:e.excuteInterfaceRules,inline:!0}},[n("el-form-item",{attrs:{label:"目标服务器选择",prop:"server","label-width":"150px"}},[n("el-select",{model:{value:e.form.server,callback:function(t){e.$set(e.form,"server",t)},expression:"form.server"}},e._l(e.serverList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{staticClass:"mgl20",attrs:{label:"执行机",prop:"excuteion","label-width":"80px"}},[n("el-input",{model:{value:e.form.excuteion,callback:function(t){e.$set(e.form,"excuteion",t)},expression:"form.excuteion"}})],1),e._v(" "),n("span",{staticClass:"app-btn app-btn-green mgl20"},[e._v("添加")])],1),e._v(" "),n("div",{staticClass:"run-interface-title"},[e._v("\n        用例选择\n      ")]),e._v(" "),n("div",{staticClass:"run-interface-search"},[n("AppSearch",{staticClass:"run-interface-search-input",on:{query:e.refreshExcelList},model:{value:e.excelListFilterText,callback:function(t){e.excelListFilterText=t},expression:"excelListFilterText"}})],1)],1),e._v(" "),e.excelList?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fetchingData,expression:"fetchingData"}],ref:"caseList",staticClass:"app-list-table",attrs:{data:e.excelListFormated,"element-loading-text":"Loading",fit:"","highlight-current-row":"",height:"calc(100vh - 20.83vw)"}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"用例名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.TestName.value)+"\n        ")]}}],null,!1,2450067625)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"用例说明"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.TestDesc.value)+"\n        ")]}}],null,!1,2269318335)}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"用例标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.TestTags.value)+"\n        ")]}}],null,!1,693703727)})],1):e._e(),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"app-btn app-btn-blue",attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("运 行")]),e._v(" "),n("span",{staticClass:"app-btn app-btn-white",on:{click:e.handleCancel}},[e._v("取 消")])])],1)])},a=[],i=n("75fc"),c=n("db72"),o=n("2226"),s=n("24d2"),u={server:[{required:!0,trigger:"blur",message:"请选择服务器"}],excuteion:[{required:!0,trigger:"blur",message:"请输入执行机"}]},l=n("5ac2"),f={components:{AppSearch:l["a"]},data:function(){return{form:{server:"",excuteion:"127.0.0.1"},excelList:[],serverList:[],excuteInterfaceRules:u,excutionResultVisible:!1,fetchingData:!1,page:0,pageSize:15,excelListFilterText:"",excelListFilterTextConfirmed:""}},computed:{interfaceObj:function(){return this.$route.params.interfaceObj},excelListFormated:function(){var e=this;return this.excelList?this.excelList.map((function(e){var t=e.other,n=e.id;return Object(c["a"])({},t,{id:n})})).filter((function(t){var n=t.TestName.value;return!e.excelListFilterTextConfirmed||n.indexOf(e.excelListFilterTextConfirmed)>-1})):[]},hasMoreExcel:function(){return this.page*this.pageSize<this.excelTotal}},created:function(){var e=this,t=this.interfaceObj.project;this.getServerList(t),this.fetchExcel().then((function(t){e.$nextTick((function(t){var n=e.$refs.caseList.$el,r=n.querySelector(".el-table__body-wrapper"),a=n.querySelector(".el-table__body");a.offsetHeight>r.offsetHeight&&r.addEventListener("scroll",(function(){if(e.hasMoreExcel&&r.offsetHeight+r.scrollTop>=a.offsetHeight){if(e.fetchingData)return;e.fetchingData=!0,e.fetchExcel().finally((function(t){e.fetchingData=!1}))}}))}))}))},methods:{fetchExcel:function(){var e=this;return Object(o["k"])({id:this.interfaceObj.id},{page:this.page+1,page_size:this.pageSize}).then((function(t){var n,r=t.data;r.excle_list.length&&(e.page++,(n=e.excelList).push.apply(n,Object(i["a"])(r.excle_list)),e.excelTotal=r.count)}))},getServerList:function(e){var t=this;Object(s["g"])({project:e}).then((function(e){var n=e.data;t.serverList=n}))},handleCancel:function(){this.$router.go(-1)},handleConfirm:function(){var e=this;this.validateForm().then(this.excuteInterface).then((function(t){e.$message({message:"运行成功",type:"success"}),e.$router.go(-1)})).catch((function(t){t&&e.$message({message:t.data?t.data.tip:t.message,type:"error"})}))},validateForm:function(){var e=this;return this.$refs.excuteForm.validate().then((function(t){var n=e.$refs.caseList.selection.map((function(e){var t=e.id;return t}));return n.length?Promise.resolve():Promise.reject(new Error("请选择用例"))}))},excuteInterface:function(){var e=this.$refs.caseList.selection.map((function(e){var t=e.id;return t}));return Object(o["f"])({interface_id:[this.interfaceObj.id],case_id:e,server_id:this.form.server,executive_machine:this.form.excuteion})},refreshExcelList:function(){this.excelListFilterTextConfirmed=this.excelListFilterText}}},d=f,m=(n("1ef9"),n("2877")),h=Object(m["a"])(d,r,a,!1,null,"6ec2d177",null);t["default"]=h.exports},"95d5":function(e,t,n){var r=n("40c3"),a=n("5168")("iterator"),i=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||i.hasOwnProperty(r(t))}},a745:function(e,t,n){e.exports=n("f410")},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray}}]);