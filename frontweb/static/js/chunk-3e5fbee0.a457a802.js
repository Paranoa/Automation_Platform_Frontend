(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e5fbee0","chunk-7854879d"],{"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),Math.easeInOutQuad=function(e,t,n,r){return e/=r/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function i(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function a(e,t,n){var a=o(),s=e-a,c=20,u=0;t="undefined"===typeof t?500:t;var l=function e(){u+=c;var o=Math.easeInOutQuad(u,a,s,t);i(o),u<t?r(e):n&&"function"===typeof n&&n()};l()}},"11e9":function(e,t,n){var r=n("52a7"),i=n("4630"),o=n("6821"),a=n("6a99"),s=n("69a8"),c=n("c69a"),u=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?u:function(e,t){if(e=o(e),t=a(t,!0),c)try{return u(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},"178b":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("a745"),i=n.n(r);function o(e){if(i()(e))return e}},"1af6":function(e,t,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"1df6":function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",(function(){return r}))},"2f21":function(e,t,n){"use strict";var r=n("79e5");e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},3953:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("774e"),i=n.n(r),o=n("c8bb"),a=n.n(o);function s(e){if(a()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return i()(e)}},"469f":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("7d7b")},"4c31":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Navbar"),e._v(" "),n("div",{staticClass:"interface-container"},[n("div",{staticClass:"interface-search"},[n("AppSearch",{staticClass:"interface-search-input",on:{query:e.handleFilterConfirmed},model:{value:e.filterForm.name,callback:function(t){e.$set(e.filterForm,"name",t)},expression:"filterForm.name"}}),e._v(" "),n("svg-icon",{staticClass:"interface-search-filter",attrs:{"icon-class":"filter"},on:{click:e.showFilterDialog}}),e._v(" "),n("el-select",{staticClass:"interface-search-project",attrs:{size:"mini"},model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}},e._l(e.$store.getters.allProjects,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("div",{staticClass:"button-group"},["module"===e.activeTab?[n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:"",disabled:!e.projectId},on:{click:e.addModule}},[e._v("添加模块\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:"",disabled:!e.currModule},on:{click:e.addInterface}},[e._v("新建接口\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:"",disabled:!e.currModule},on:{click:e.addBusinessFlow}},[e._v("新建流程\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:"",disabled:!(e.projectId&&e.currModule)},on:{click:function(t){return e.setTopModule(e.currModule)}}},[e._v("置顶模块\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:"",disabled:!e.currModule},on:{click:e.editModule}},[e._v("编辑模块\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:"",disabled:!e.currModule},on:{click:e.deleteModule}},[e._v("删除模块\n        ")])]:"interface"===e.activeTab?[n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:""}},[e._v("复制")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{size:"small",plain:""},on:{click:e.deleteInterface}},[e._v("删除\n        ")])]:e._e()],2),e._v(" "),n("div",{staticClass:"interface-block"},[n("div",{staticClass:"interface-modules",class:{active:"module"===e.activeTab},on:{click:function(t){e.activeTab="module"}}},[n("div",{staticClass:"modules-header"},[n("span",{staticClass:"title"},[e._v("当前项目：")]),e._v(" "),e.selectedProject?n("span",[e._v(e._s(e.selectedProject.name))]):e._e()]),e._v(" "),n("div",{staticClass:"modules-box"},e._l(e.modulesSorted,(function(t){return n("div",{key:t.id,staticClass:"modules-item",class:{active:e.currModule===t},on:{click:function(n){return e.selectModule(t)}}},[n("span",{staticStyle:{position:"relative"}},[e.currModule===t?n("i",{staticClass:"icon-point"}):e._e(),e._v("\n              "+e._s(t.name)+"\n            ")])])})),0)]),e._v(" "),n("div",{staticClass:"interface-list",class:{active:"interface"===e.activeTab},on:{click:function(t){e.activeTab="interface"}}},[n("InterfaceList",{ref:"interfaceList",attrs:{"show-selection":"","table-height":"calc(100vh - 18.125vw)","append-params":e.appendParams},on:{selectionChange:function(t){e.activeTab="interface"}}})],1)]),e._v(" "),e.projectId?n("AddModule",{attrs:{visible:e.addModuleVisible,"project-id":e.projectId,module:e.currModule,"is-edit":e.isEditModule},on:{"update:visible":function(t){e.addModuleVisible=t},finished:e.handleModuleUpdated}}):e._e(),e._v(" "),n("FilterDialog",{attrs:{visible:e.filterDialogVisible},on:{"update:visible":function(t){e.filterDialogVisible=t},selected:e.handleFilterSelected}})],1)],1)},i=[],o=(n("7514"),n("75fc")),a=(n("55dd"),n("db72")),s=n("cd4a"),c=n("9fbe"),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.isEdit?"修改模块":"添加模块",visible:e.visible,width:"40%","before-close":e.handleCancel}},[n("el-form",{attrs:{model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"模块名称"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isSubmitLoading,expression:"isSubmitLoading"}],attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)},l=[],d=(n("7f7f"),n("c5f6"),n("2226")),f={props:{visible:{type:Boolean,default:!1},projectId:{type:Number,required:!0},module:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},data:function(){return{form:{name:""},isSubmitLoading:!1}},watch:{visible:{handler:function(e){e&&(this.isEdit&&this.module&&this.module.name?this.form.name=this.module.name:this.form={})},immediate:!0}},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.isSubmitLoading||(this.form.name?(this.isSubmitLoading=!0,this.isEdit?Object(d["q"])({id:this.module.id},{name:this.form.name,project:this.projectId}).then((function(t){e.$message({type:"success",message:"修改模块成功"}),e.$emit("finished"),e.$emit("update:visible",!1)})).finally((function(t){return setTimeout((function(t){e.isSubmitLoading=!1}),500)})):Object(d["b"])({name:this.form.name,project:this.projectId}).then((function(t){e.$message({type:"success",message:"新建模块成功"}),e.$emit("finished"),e.$emit("update:visible",!1)})).finally((function(t){return setTimeout((function(t){e.isSubmitLoading=!1}),500)}))):this.$message({message:"请输入模块名称",type:"error"}))}}},p=f,h=n("2877"),m=Object(h["a"])(p,u,l,!1,null,null,null),b=m.exports,v=n("5ac2"),g=n("a5dd"),j={name:"Interface",components:{Navbar:s["b"],InterfaceList:c["default"],AddModule:b,AppSearch:v["a"],FilterDialog:g["a"]},data:function(){var e="";return this.$store.getters.allProjects&&(this.$store.getters.selectedProjectId?e=this.$store.getters.selectedProjectId:this.$store.getters.allProjects.length&&(e=this.$store.getters.allProjects[0].id)),{projectId:e,modules:[],currModule:null,addModuleVisible:!1,addInterfaceVisible:!1,filterForm:{name:""},filterFormConfirmed:{},filterDialogVisible:!1,activeTab:"module",isEditModule:!1}},computed:{appendParams:function(){var e=Object(a["a"])({},this.filterFormConfirmed);return this.projectId&&(e.project=this.projectId),this.currModule&&this.currModule.id&&(e.intermodule=this.currModule.id),e},modulesSorted:function(){return Object(o["a"])(this.modules).sort((function(e,t){return e.top?-1:t.n?1:0}))},selectedProject:function(){return this.$store.getters.selectedProject}},watch:{projectId:{handler:function(e){var t=this;this.$store.dispatch("user/setSelectedProjectId",e),this.getModules().then((function(e){})),this.$nextTick((function(){t.$refs.interfaceList.refreshInterfaceList()}))},immediate:!0},currModule:{handler:function(e){var t=this;this.$nextTick((function(){t.$refs.interfaceList.refreshInterfaceList()}))}}},activated:function(){this.needsRefresh&&(this.refreshInterfaceList(),this.refreshSelectedProject())},deactivated:function(){this.needsRefresh=!0},methods:{selectModule:function(e){this.currModule===e?this.currModule=null:this.currModule=e},getModules:function(){var e=this;return Object(d["j"])({project:this.projectId}).then((function(t){e.modules=t.data}))},addModule:function(){this.isEditModule=!1,this.addModuleVisible=!0},editModule:function(){this.currModule&&(this.isEditModule=!0,this.addModuleVisible=!0)},deleteModule:function(){var e=this;this.$confirm("确认删除模块？").then((function(t){Object(d["e"])({id:e.currModule.id},{project:e.projectId}).then((function(t){e.$message({message:"删除成功",type:"success"}),e.getModules().then((function(t){e.currModule=null}))})).catch((function(t){e.$message({message:"删除失败",type:"error"})}))})).catch((function(e){}))},showFilterDialog:function(){this.filterDialogVisible=!0},addInterface:function(){this.$router.push({name:"InterfaceAdd",params:{projectId:this.projectId,moduleId:this.currModule.id}})},addBusinessFlow:function(){this.$router.push({name:"BusinessAdd",params:{projectId:this.projectId,moduleId:this.currModule.id}})},setTopModule:function(e){var t=this;Object(d["q"])({id:e.id},{top:1,project:this.projectId}).then((function(e){t.$message({message:"置顶成功",type:"success"}),t.handleModuleUpdated()}))},deleteInterface:function(){var e=this,t=this.$refs.interfaceList.getSelection()||[],n=t.map((function(e){var t=e.id;return t}));n.length&&this.$confirm("确认删除接口？").then((function(t){Object(d["d"])({ids:n}).then((function(t){e.$message({message:"删除接口成功",type:"success"}),e.refreshInterfaceList()})).catch((function(t){e.$message({message:t.message,type:"error"})}))})).catch((function(e){}))},copyInterface:function(){var e=this.$refs.interfaceList.getSelection();console.log(e)},refreshInterfaceList:function(){this.$refs.interfaceList.refreshInterfaceList()},handleModuleUpdated:function(){var e=this;this.getModules().then((function(t){e.currModule=e.modules.find((function(t){var n=t.id;return e.currModule.id===n}))}))},handleFilterSelected:function(e){var t=this;this.filterForm=Object(a["a"])({},this.filterForm,{},e),this.confirmFilterForm(),this.$nextTick((function(e){return t.refreshInterfaceList()}))},handleFilterConfirmed:function(){var e=this;this.confirmFilterForm(),this.$nextTick((function(t){return e.refreshInterfaceList()}))},confirmFilterForm:function(){this.filterFormConfirmed=Object(a["a"])({},this.filterForm)},refreshSelectedProject:function(){this.$store.getters.selectedProjectId&&(this.projectId=this.$store.getters.selectedProjectId)}}},y=j,I=(n("6dc2"),Object(h["a"])(y,r,i,!1,null,"4bf1d4ea",null));t["default"]=I.exports},"549b":function(e,t,n){"use strict";var r=n("d864"),i=n("63b6"),o=n("241e"),a=n("b0dc"),s=n("3702"),c=n("b447"),u=n("20fd"),l=n("7cd6");i(i.S+i.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,d,f=o(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,b=void 0!==m,v=0,g=l(f);if(b&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(t=c(f.length),n=new p(t);t>v;v++)u(n,v,b?m(f[v],v):f[v]);else for(d=g.call(f),n=new p;!(i=d.next()).done;v++)u(n,v,b?a(d,m,[i.value,v],!0):i.value);return n.length=v,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"55dd":function(e,t,n){"use strict";var r=n("5ca1"),i=n("d8e8"),o=n("4bf8"),a=n("79e5"),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(o(this)):s.call(o(this),i(e))}})},"5d73":function(e,t,n){e.exports=n("469f")},"5dbc":function(e,t,n){var r=n("d3f4"),i=n("8b97").set;e.exports=function(e,t,n){var o,a=t.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(e,o),e}},"6dc2":function(e,t,n){"use strict";var r=n("a111"),i=n.n(r);i.a},"75fc":function(e,t,n){"use strict";var r=n("a745"),i=n.n(r);function o(e){if(i()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var a=n("3953");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){return o(e)||Object(a["a"])(e)||s()}n.d(t,"a",(function(){return c}))},"768b":function(e,t,n){"use strict";var r=n("178b"),i=n("5d73"),o=n.n(i),a=n("c8bb"),s=n.n(a);function c(e,t){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var c,u=o()(e);!(r=(c=u.next()).done);r=!0)if(n.push(c.value),t&&n.length===t)break}catch(l){i=!0,a=l}finally{try{r||null==u["return"]||u["return"]()}finally{if(i)throw a}}return n}}var u=n("1df6");function l(e,t){return Object(r["a"])(e)||c(e,t)||Object(u["a"])()}n.d(t,"a",(function(){return l}))},"774e":function(e,t,n){e.exports=n("d2d5")},"7d7b":function(e,t,n){var r=n("e4ae"),i=n("7cd6");e.exports=n("584a").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},"8b97":function(e,t,n){var r=n("d3f4"),i=n("cb7c"),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},9093:function(e,t,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},"95d5":function(e,t,n){var r=n("40c3"),i=n("5168")("iterator"),o=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},a111:function(e,t,n){},a745:function(e,t,n){e.exports=n("f410")},aa77:function(e,t,n){var r=n("5ca1"),i=n("be13"),o=n("79e5"),a=n("fdef"),s="["+a+"]",c="​",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),d=function(e,t,n){var i={},s=o((function(){return!!a[e]()||c[e]()!=c})),u=i[e]=s?t(f):a[e];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=d.trim=function(e,t){return e=String(i(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=d},b964:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a}));var r=n("b775");function i(e){return Object(r["a"])({url:"/datasource/sources/",method:"get",params:e})}function o(e){return Object(r["a"])({url:"datasource/sources/",method:"delete",data:e})}function a(e,t){return Object(r["a"])({url:"/datasource/sources/".concat(e.id,"/"),method:"put",data:t})}},c5f6:function(e,t,n){"use strict";var r=n("7726"),i=n("69a8"),o=n("2d95"),a=n("5dbc"),s=n("6a99"),c=n("79e5"),u=n("9093").f,l=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",h=r[p],m=h,b=h.prototype,v=o(n("2aeb")(b))==p,g="trim"in String.prototype,j=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var n,r,i,o=t.charCodeAt(0);if(43===o||45===o){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+t}for(var a,c=t.slice(2),u=0,l=c.length;u<l;u++)if(a=c.charCodeAt(u),a<48||a>i)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(v?c((function(){b.valueOf.call(n)})):o(n)!=p)?a(new m(j(t)),n,h):j(t)};for(var y,I=n("9e1e")?u(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;I.length>_;_++)i(m,y=I[_])&&!i(h,y)&&d(h,y,l(m,y));h.prototype=b,b.constructor=h,n("2aba")(r,p,h)}},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);