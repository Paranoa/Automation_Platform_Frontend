(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8f4629c","chunk-7854879d"],{"07a7":function(e,t,n){},"09f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),Math.easeInOutQuad=function(e,t,n,i){return e/=i/2,e<1?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function r(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function s(e,t,n){var s=a(),o=e-s,c=20,l=0;t="undefined"===typeof t?500:t;var u=function e(){l+=c;var a=Math.easeInOutQuad(l,s,o,t);r(a),l<t?i(e):n&&"function"===typeof n&&n()};u()}},"11e9":function(e,t,n){var i=n("52a7"),r=n("4630"),a=n("6821"),s=n("6a99"),o=n("69a8"),c=n("c69a"),l=Object.getOwnPropertyDescriptor;t.f=n("9e1e")?l:function(e,t){if(e=a(e),t=s(t,!0),c)try{return l(e,t)}catch(n){}if(o(e,t))return r(!i.f.call(e,t),e[t])}},"178b":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("a745"),r=n.n(i);function a(e){if(r()(e))return e}},"1af6":function(e,t,n){var i=n("63b6");i(i.S,"Array",{isArray:n("9003")})},"1c78":function(e,t,n){},"1df6":function(e,t,n){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}n.d(t,"a",(function(){return i}))},"20d6":function(e,t,n){"use strict";var i=n("5ca1"),r=n("0a49")(6),a="findIndex",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i(i.P+i.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},3953:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("774e"),r=n.n(i),a=n("c8bb"),s=n.n(a);function o(e){if(s()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e))return r()(e)}},4104:function(e,t,n){"use strict";var i=n("1c78"),r=n.n(i);r.a},"469f":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("7d7b")},"549b":function(e,t,n){"use strict";var i=n("d864"),r=n("63b6"),a=n("241e"),s=n("b0dc"),o=n("3702"),c=n("b447"),l=n("20fd"),u=n("7cd6");r(r.S+r.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,d,f=a(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,b=0,g=u(f);if(v&&(m=i(m,h>2?arguments[2]:void 0,2)),void 0==g||p==Array&&o(g))for(t=c(f.length),n=new p(t);t>b;b++)l(n,b,v?m(f[b],b):f[b]);else for(d=g.call(f),n=new p;!(r=d.next()).done;b++)l(n,b,v?s(d,m,[r.value,b],!0):r.value);return n.length=b,n}})},"54a1":function(e,t,n){n("6c1c"),n("1654"),e.exports=n("95d5")},"5d73":function(e,t,n){e.exports=n("469f")},"5dbc":function(e,t,n){var i=n("d3f4"),r=n("8b97").set;e.exports=function(e,t,n){var a,s=t.constructor;return s!==n&&"function"==typeof s&&(a=s.prototype)!==n.prototype&&i(a)&&r&&r(e,a),e}},6641:function(e,t,n){"use strict";var i=n("07a7"),r=n.n(i);r.a},"75fc":function(e,t,n){"use strict";var i=n("a745"),r=n.n(i);function a(e){if(r()(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var s=n("3953");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){return a(e)||Object(s["a"])(e)||o()}n.d(t,"a",(function(){return c}))},"768b":function(e,t,n){"use strict";var i=n("178b"),r=n("5d73"),a=n.n(r),s=n("c8bb"),o=n.n(s);function c(e,t){if(o()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var c,l=a()(e);!(i=(c=l.next()).done);i=!0)if(n.push(c.value),t&&n.length===t)break}catch(u){r=!0,s=u}finally{try{i||null==l["return"]||l["return"]()}finally{if(r)throw s}}return n}}var l=n("1df6");function u(e,t){return Object(i["a"])(e)||c(e,t)||Object(l["a"])()}n.d(t,"a",(function(){return u}))},"774e":function(e,t,n){e.exports=n("d2d5")},"7d7b":function(e,t,n){var i=n("e4ae"),r=n("7cd6");e.exports=n("584a").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},"8b97":function(e,t,n){var i=n("d3f4"),r=n("cb7c"),a=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:a}},9093:function(e,t,n){var i=n("ce10"),r=n("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},"913d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Navbar"),e._v(" "),n("div",{staticClass:"excution-container"},[n("div",{staticClass:"excution-search"},[n("AppSearch",{staticClass:"excution-search-input",on:{query:e.handleFilterConfirmed},model:{value:e.filterForm.name,callback:function(t){e.$set(e.filterForm,"name",t)},expression:"filterForm.name"}}),e._v(" "),n("svg-icon",{staticClass:"excution-search-filter",attrs:{"icon-class":"filter"}}),e._v(" "),n("el-select",{staticClass:"excution-search-project",attrs:{size:"mini"},model:{value:e.projectId,callback:function(t){e.projectId=t},expression:"projectId"}},e._l(e.$store.getters.allProjects,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("div",{staticClass:"button-group"},["caseSet"===e.activeTab?[n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small",disabled:!e.currentNode||1!==e.currentNode.type},on:{click:e.addFolder}},[e._v("新建文件夹\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small",disabled:!e.currentNode||1!==e.currentNode.type},on:{click:e.addCaseSet}},[e._v("新建执行集\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small",disabled:!e.currentNode||2!==e.currentNode.type},on:{click:e.chooseInterface}},[e._v("选择接口/流程\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small",disabled:!e.currentNode||"_default"===e.currentNode.id},on:{click:e.editNode}},[e._v("编辑\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"}},[e._v("复制\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"},on:{click:e.deleteNode}},[e._v("删除\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"}},[e._v("粘贴\n        ")])]:"interface"===e.activeTab?[n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"},on:{click:e.multiRunInterface}},[e._v("批量运行\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"},on:{click:e.deleteInterfaceFromExcution}},[e._v("删除接口\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"}},[e._v("批量日志下载\n        ")]),e._v(" "),n("el-button",{staticClass:"app-el-btn-primary",attrs:{plain:"",size:"small"}},[e._v("执行报告\n        ")])]:e._e()],2),e._v(" "),n("div",{staticClass:"excution-main"},[n("div",{staticClass:"excution-caseset",class:{active:"caseSet"===e.activeTab},on:{click:function(t){e.activeTab="caseSet"}}},[n("div",{staticClass:"caseset-header"},[n("span",{staticClass:"title"},[e._v("当前项目：")]),e._v(" "),e.selectedProject?n("span",[e._v(e._s(e.selectedProject.name))]):e._e()]),e._v(" "),n("div",{staticClass:"caseset-box"},[n("el-tree",{attrs:{"node-key":"id","default-expand-all":"",data:e.treeData,"default-expanded-keys":[9,10],"expand-on-click-node":!1,props:{children:"subs",label:"name"}},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,r=t.data;return n("span",{},[2===r.type?n("span",{staticClass:"icon"},[n("svg-icon",{staticClass:"default",attrs:{"icon-class":"file"}}),e._v(" "),n("svg-icon",{staticClass:"active",attrs:{"icon-class":"file-active"}})],1):n("span",{staticClass:"icon"},[n("svg-icon",{staticClass:"default",attrs:{"icon-class":"folder"}}),e._v(" "),n("svg-icon",{staticClass:"active",attrs:{"icon-class":"folder-active"}})],1),e._v(" "),n("span",[e._v(e._s(i.label))])])}}])})],1)]),e._v(" "),n("div",{staticClass:"excution-list",class:{active:"interface"===e.activeTab},on:{click:function(t){e.activeTab="interface"}}},[n("ExcutionInterfaceList",{ref:"excutionInterfaceList",attrs:{"table-height":"calc(100vh - 17.97vw)","show-selection":"","append-params":e.appendParamsExcution},on:{selectionChange:function(t){e.activeTab="interface"}}})],1)])]),e._v(" "),e.projectId?n("AddFolder",{attrs:{visible:e.addFolderVisible,parent:e.currentParent,folder:e.currFolder,"is-edit":e.isEditFolder,"project-id":e.projectId},on:{"update:visible":function(t){e.addFolderVisible=t},finished:function(t){return e.handleFinish("folder",t)}}}):e._e(),e._v(" "),e.projectId?n("AddCaseSet",{attrs:{visible:e.addCaseSetVisible,parent:e.currentParent,"case-set":e.currCaseSet,"is-edit":e.isEditCaseSet,"project-id":e.projectId},on:{"update:visible":function(t){e.addCaseSetVisible=t},finished:function(t){return e.handleFinish("caseSet",t)}}}):e._e(),e._v(" "),n("el-dialog",{attrs:{title:"选择单接口",visible:e.interfaceVisible,width:"80%","before-close":function(t){return e.interfaceVisible=!1}}},[n("InterfaceList",{ref:"interfaceList",attrs:{"table-height":"20vw","show-operation":!1,"table-class":"app-list-table","append-params":e.appendParamsChoose,"show-selection":"","show-search":""}}),e._v(" "),n("span",{staticClass:"dialog-footer-inner",attrs:{slot:"footer"},slot:"footer"},[n("span",{staticClass:"app-btn app-btn-blue",on:{click:e.handleConfirmChoose}},[e._v("确 定\n      ")]),e._v(" "),n("span",{staticClass:"app-btn app-btn-white",on:{click:function(t){e.interfaceVisible=!1}}},[e._v("取 消\n      ")])])],1),e._v(" "),n("el-dialog",{attrs:{title:"选择运行环境",width:"20%","append-to-body":"",visible:e.excutionDialogvisible,"before-close":function(t){return e.excutionDialogvisible=!1}}},[n("el-form",{ref:"excuteForm",attrs:{"label-position":"left","label-width":"130px",model:e.form,rules:{server:[{required:!0,trigger:"change",message:"请选择环境"}],excuteion:[{required:!0,trigger:"blur",message:"请输入执行机"}]}}},[n("el-form-item",{attrs:{label:"目标环境选择：",prop:"server"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.form.server,callback:function(t){e.$set(e.form,"server",t)},expression:"form.server"}},e._l(e.serverList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"执行机：",prop:"excuteion"}},[n("el-input",{model:{value:e.form.excuteion,callback:function(t){e.$set(e.form,"excuteion",t)},expression:"form.excuteion"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.excutionDialogvisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isExcutionLoading,expression:"isExcutionLoading"}],attrs:{type:"primary"},on:{click:e.handleExcutionConfirm}},[e._v("确 定")])],1)],1)],1)},r=[],a=(n("7f7f"),n("20d6"),n("db72")),s=n("cd4a"),o=n("9fbe"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"interface-list-container"},[n("div",{staticClass:"interface-main"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"interfaceList",class:e.tableClass,attrs:{fit:"","highlight-current-row":"","element-loading-text":"Loading",data:e.list,height:e.tableHeight,"empty-text":e.emptyText},on:{"selection-change":function(t){return e.$emit("selectionChange")}}},[e.showSelection?n("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"编号",width:"95"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.id)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("interfaceType")(t.row.interface_type))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"描述",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"步骤",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.step)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",prop:"created_at",label:"创建时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(e._f("parseToDate")(t.row.created)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"修改人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.modifier))])]}}])}),e._v(" "),e.showOperation?n("el-table-column",{attrs:{label:"操作",width:"330",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticClass:"operation-button-group"},[n("span",{on:{click:function(n){return e.editInterface(t.row)}}},[e._v("编辑")]),e._v(" "),1===t.row.status?[n("span",{on:{click:function(n){return e.runInterface(t.row)}}},[e._v("运行")])]:2===t.row.status?[n("span",{on:{click:function(n){return e.terminateInterface(t.row)}}},[e._v("停止")]),e._v(" "),n("span",{on:{click:function(n){return e.checkResult(t.row)}}},[e._v("查看结果")])]:3===t.row.status?[n("span",{on:{click:function(n){return e.runInterface(t.row)}}},[e._v("运行")]),e._v(" "),n("span",{on:{click:function(n){return e.checkResult(t.row)}}},[e._v("查看结果")])]:e._e()],2)}}],null,!1,3834658530)}):e._e()],1),e._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getExcutionInterface}}),e._v(" "),n("el-dialog",{attrs:{title:"选择运行环境",width:"20%","append-to-body":"",visible:e.excutionDialogvisible,"before-close":function(t){return e.excutionDialogvisible=!1}}},[n("el-form",{ref:"excuteForm",attrs:{"label-position":"left","label-width":"130px",model:e.form,rules:{server:[{required:!0,trigger:"change",message:"请选择环境"}],excuteion:[{required:!0,trigger:"blur",message:"请输入执行机"}]}}},[n("el-form-item",{attrs:{label:"目标环境选择：",prop:"server"}},[n("el-select",{staticStyle:{width:"100%"},model:{value:e.form.server,callback:function(t){e.$set(e.form,"server",t)},expression:"form.server"}},e._l(e.serverList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"执行机：",prop:"excuteion"}},[n("el-input",{model:{value:e.form.excuteion,callback:function(t){e.$set(e.form,"excuteion",t)},expression:"form.excuteion"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.excutionDialogvisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.isExcutionLoading,expression:"isExcutionLoading"}],attrs:{type:"primary"},on:{click:e.handleExcutionConfirm}},[e._v("确 定")])],1)],1)],1)])},l=[],u=n("2226"),d=n("b775");function f(e){return Object(d["a"])({url:"/executionsetmanagement/executiontset/",method:"get",params:e})}function p(e){return Object(d["a"])({url:"/executionsetmanagement/executiontset/",method:"post",data:e})}function h(e,t){return Object(d["a"])({url:"/executionsetmanagement/executiontset/".concat(e.id,"/"),method:"put",data:t})}function m(e){return Object(d["a"])({url:"/executionsetmanagement/executiontset/".concat(e.id,"/"),method:"delete"})}function v(e,t){return Object(d["a"])({url:"/executionsetmanagement/executiontset/".concat(e.id,"/"),method:"get",params:t})}var b=n("24d2"),g=n("333d"),_={components:{Pagination:g["a"]},props:{appendParams:{type:Object,default:function(){return{}}},tableHeight:{type:String,default:"auto"},tableClass:{type:String,default:""},showSelection:{type:Boolean,default:!1},showOperation:{type:Boolean,default:!0}},data:function(){return{list:null,total:0,listLoading:!1,listQuery:{page:1,limit:20},serverList:[],excutionDialogvisible:!1,currInterface:null,form:{server:"",excuteion:"127.0.0.1"},isExcutionLoading:!1}},computed:{id:function(){return this.appendParams.id},emptyText:function(){return this.id?"暂无数据":"请选择执行集"}},created:function(){this.getExcutionInterface()},methods:{getExcutionInterface:function(){var e=this;this.id?(this.listLoading=!0,v({id:this.id},Object(a["a"])({},this.appendParams,{page:this.listQuery.page,page_size:this.listQuery.limit})).then((function(t){e.list=t.data.results,e.total=t.data.count,e.listLoading=!1}))):(this.list=[],this.total=0)},refreshInterfaceList:function(){this.listQuery.page=1,this.getExcutionInterface()},editInterface:function(e){1===e.interface_type?this.$router.push({name:"InterfaceEdit",params:{projectId:e.project,interfaceId:e.id,interface:e}}):2===e.interface_type&&this.$router.push({name:"BusinessEdit",params:{projectId:e.project,interfaceId:e.id,interface:e}})},runInterface:function(e){var t=this;Object(b["g"])({project:e.project}).then((function(n){var i=n.data;t.serverList=i,t.currInterface=e,t.excutionDialogvisible=!0}))},excuteInterface:function(){var e=this.currInterface.id;return Object(u["f"])({interface_id:[e],server_id:this.form.server,executive_machine:this.form.excuteion,isdebug:!1})},handleExcutionConfirm:function(){var e=this;this.isExcutionLoading||(this.isExcutionLoading=!0,this.$refs.excuteForm.validate().then(this.excuteInterface).then((function(t){e.$message({message:"运行成功",type:"success"})})).catch((function(t){t&&e.$message({message:t.data.tip||t.message,type:"error"})})).finally((function(t){e.isExcutionLoading=!1})))},getSelection:function(){return this.$refs.interfaceList.selection},terminateInterface:function(e){var t=this;this.$confirm("确认停止接口运行？").then((function(n){t.listLoading=!0,Object(u["n"])({interfaceid:[e.id],isdebug:!1}).then((function(e){t.$message({message:"已停止接口运行",type:"success"}),t.getExcutionInterface()})).catch((function(e){t.$message({message:e.data.tip||e.message,type:"error"})})).finally((function(e){t.listLoading=!1}))})).catch((function(e){}))}}},x=_,y=(n("4104"),n("2877")),I=Object(y["a"])(x,c,l,!1,null,"5cb7f1ce",null),C=I.exports,j=n("5ac2"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.isEdit?"修改文件夹":"新建文件夹",visible:e.visible,width:"40%","before-close":e.handleCancel}},[n("el-form",{attrs:{model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"文件夹名"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)},E=[],S=(n("c5f6"),{props:{visible:{type:Boolean,default:!1},parent:{type:Object,default:null},folder:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1},projectId:{type:[String,Number],default:""}},data:function(){return{form:{name:""}}},computed:{parentId:function(){return this.parent?"_default"===this.parent.id?"":this.parent.id:""}},watch:{visible:{handler:function(e){e&&(this.isEdit&&this.folder&&this.folder.name?this.form.name=this.folder.name:this.form={})},immediate:!0}},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.isEdit?h({id:this.folder.id},{name:this.form.name}).then((function(t){e.$message({type:"success",message:"更新完成"}),e.$emit("finished",t.data),e.$emit("update:visible",!1)})):p({name:this.form.name,type:1,parent:this.parentId,project:this.projectId}).then((function(t){e.$message({type:"success",message:"新建文件夹成功"}),e.$emit("finished",t.data),e.$emit("update:visible",!1)}))}}}),$=S,k=Object(y["a"])($,w,E,!1,null,null,null),N=k.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.isEdit?"修改执行集":"新建执行集",visible:e.visible,width:"40%","before-close":e.handleCancel}},[n("el-form",{attrs:{model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"执行集名"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.handleCancel}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("确 定")])],1)],1)},F=[],O={props:{visible:{type:Boolean,default:!1},parent:{type:Object,default:null},caseSet:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1},projectId:{type:[String,Number],default:""}},data:function(){return{form:{name:""}}},computed:{parentId:function(){return this.parent?"_default"===this.parent.id?"":this.parent.id:""}},watch:{visible:{handler:function(e){e&&(this.isEdit&&this.caseSet&&this.caseSet.name?this.form.name=this.caseSet.name:this.form={})},immediate:!0}},methods:{handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var e=this;this.isEdit?h({id:this.caseSet.id},{name:this.form.name}).then((function(t){e.$message({type:"success",message:"更新完成"}),e.$emit("finished",t.data),e.$emit("update:visible",!1)})):p({name:this.form.name,type:2,parent:this.parentId,project:this.projectId}).then((function(t){e.$message({type:"success",message:"新建执行集成功"}),e.$emit("finished",t.data),e.$emit("update:visible",!1)}))}}},P=O,T=Object(y["a"])(P,L,F,!1,null,null,null),A=T.exports,V={name:"Execution",components:{InterfaceList:o["default"],ExcutionInterfaceList:C,Navbar:s["b"],AppSearch:j["a"],AddFolder:N,AddCaseSet:A},data:function(){var e="";return this.$store.getters.allProjects&&(this.$store.getters.selectedProjectId?e=this.$store.getters.selectedProjectId:this.$store.getters.allProjects.length&&(e=this.$store.getters.allProjects[0].id)),{filterForm:{name:""},filterFormConfirmed:{},projectId:e,modules:[],activeTab:"caseSet",treeData:[{id:"_default",label:"default",type:"1"}],currentNode:null,addFolderVisible:!1,currFolder:null,isEditFolder:!1,addCaseSetVisible:!1,currCaseSet:null,isEditCaseSet:!1,currentParent:null,interfaceVisible:!1,excutionDialogvisible:!1,serverList:[],form:{server:"",excuteion:"127.0.0.1"},isExcutionLoading:!1}},computed:{appendParamsExcution:function(){var e=Object(a["a"])({},this.filterFormConfirmed);return this.currentNode&&2===this.currentNode.type?e.id=this.currentNode.id:e.id=null,e},appendParamsChoose:function(){return{project:this.projectId}},selectedProject:function(){return this.$store.getters.selectedProject}},watch:{projectId:{handler:function(e){this.$store.dispatch("user/setSelectedProjectId",e),this.getExcutionSet()},immediate:!0},currentNode:{handler:function(e){var t=this;this.$nextTick((function(e){t.refreshExcutionInterfaceList()}))}},appendParamsChoose:function(){var e=this;this.$nextTick((function(t){e.refreshChooseInterfaceList()}))}},activated:function(){this.needsRefresh&&(this.refreshExcutionInterfaceList(),this.refreshChooseInterfaceList(),this.refreshSelectedProject())},deactivated:function(){this.needsRefresh=!0},methods:{getExcutionSet:function(){var e=this;f({project:this.projectId}).then((function(t){e.treeData=[{id:"_default",name:"default",type:1,subs:t.data}],e.currentNode=null,e.$nextTick((function(t){e.refreshExcutionInterfaceList()}))}))},handleNodeClick:function(e,t){this.currentNode=e,this.currentNodeTreeData=t,this.activeTab="caseSet"},addFolder:function(){this.isEditFolder=!1,this.currentParent=this.currentNode,this.addFolderVisible=!0},editFolder:function(){this.currFolder=this.currentNode,this.isEditFolder=!0,this.addFolderVisible=!0},addCaseSet:function(){this.isEditCaseSet=!1,this.currentParent=this.currentNode,this.addCaseSetVisible=!0},editCaseSet:function(){this.currCaseSet=this.currentNode,this.isEditCaseSet=!0,this.addCaseSetVisible=!0},editNode:function(){1===this.currentNode.type?this.editFolder():2===this.currentNode.type&&this.editCaseSet()},deleteNode:function(){var e=this;this.$confirm("确认删除节点？").then((function(t){m({id:e.currentNode.id}).then((function(t){e.$message({message:"删除成功",type:"success"});var n=e.currentNodeTreeData,i=n.parent,r=i.childNodes.findIndex((function(e){var t=e.id;return t===n.id}));i.childNodes.splice(r,1)}))})).catch((function(e){}))},chooseInterface:function(){this.interfaceVisible=!0},handleConfirmChoose:function(){var e=this,t=this.$refs.interfaceList.getSelection();t.length&&h({id:this.currentNode.id},{interface:t.map((function(e){var t=e.id;return t}))}).then((function(t){e.$message({message:"添加 接口/流程 完成",type:"success"}),e.interfaceVisible=!1,e.$refs.excutionInterfaceList.getExcutionInterface()}))},handleFinish:function(e,t){"folder"===e?this.isEditFolder?this.currentNode.name=t.name:this.currentParent.subs.push(t):"caseSet"===e&&(this.isEditCaseSet?this.currentNode.name=t.name:this.currentParent.subs.push(t))},deleteInterfaceFromExcution:function(){var e=this,t=this.$refs.excutionInterfaceList.getSelection();t.length?h({id:this.currentNode.id},{interface:t.map((function(e){var t=e.id;return t})),isdelete:!0}).then((function(t){e.$message({message:"删除 接口/流程 完成",type:"success"}),e.$refs.excutionInterfaceList.getExcutionInterface()})):this.$message({message:"请选择接口/流程"})},handleFilterConfirmed:function(){var e=this;this.confirmFilterForm(),this.$nextTick((function(t){return e.refreshExcutionInterfaceList()}))},confirmFilterForm:function(){this.filterFormConfirmed=Object(a["a"])({},this.filterForm)},refreshExcutionInterfaceList:function(){this.$refs.excutionInterfaceList.refreshInterfaceList()},refreshChooseInterfaceList:function(){this.$refs.interfaceList&&this.$refs.interfaceList.refreshInterfaceList()},refreshSelectedProject:function(){this.$store.getters.selectedProjectId&&(this.projectId=this.$store.getters.selectedProjectId)},multiRunInterface:function(e){var t=this;this.$refs.excutionInterfaceList.getSelection().length?Object(b["g"])({project:this.selectedProject.id}).then((function(e){var n=e.data;t.serverList=n,t.excutionDialogvisible=!0})):this.$message({message:"请选择至少一个接口"})},handleExcutionConfirm:function(){var e=this;this.isExcutionLoading||(this.isExcutionLoading=!0,this.$refs.excuteForm.validate().then(this.excuteInterface).then((function(t){e.$message({message:"运行成功",type:"success"})})).catch((function(t){t&&e.$message({message:t.data?t.data.tip:t.message,type:"error"})})).finally((function(t){e.isExcutionLoading=!1})))},excuteInterface:function(){var e=this.$refs.excutionInterfaceList.getSelection().map((function(e){var t=e.id;return t}));return Object(u["f"])({interface_id:e,server_id:this.form.server,executive_machine:this.form.excuteion,isdebug:!1})}}},D=V,z=(n("6641"),Object(y["a"])(D,i,r,!1,null,"031d551a",null));t["default"]=z.exports},"95d5":function(e,t,n){var i=n("40c3"),r=n("5168")("iterator"),a=n("481b");e.exports=n("584a").isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||a.hasOwnProperty(i(t))}},a745:function(e,t,n){e.exports=n("f410")},aa77:function(e,t,n){var i=n("5ca1"),r=n("be13"),a=n("79e5"),s=n("fdef"),o="["+s+"]",c="​",l=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(e,t,n){var r={},o=a((function(){return!!s[e]()||c[e]()!=c})),l=r[e]=o?t(f):s[e];n&&(r[n]=l),i(i.P+i.F*o,"String",r)},f=d.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b964:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var i=n("b775");function r(e){return Object(i["a"])({url:"/datasource/sources/",method:"get",params:e})}function a(e){return Object(i["a"])({url:"datasource/sources/",method:"delete",data:e})}function s(e,t){return Object(i["a"])({url:"/datasource/sources/".concat(e.id,"/"),method:"put",data:t})}},c5f6:function(e,t,n){"use strict";var i=n("7726"),r=n("69a8"),a=n("2d95"),s=n("5dbc"),o=n("6a99"),c=n("79e5"),l=n("9093").f,u=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",h=i[p],m=h,v=h.prototype,b=a(n("2aeb")(v))==p,g="trim"in String.prototype,_=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var n,i,r,a=t.charCodeAt(0);if(43===a||45===a){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+t}for(var s,c=t.slice(2),l=0,u=c.length;l<u;l++)if(s=c.charCodeAt(l),s<48||s>r)return NaN;return parseInt(c,i)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof h&&(b?c((function(){v.valueOf.call(n)})):a(n)!=p)?s(new m(_(t)),n,h):_(t)};for(var x,y=n("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;y.length>I;I++)r(m,x=y[I])&&!r(h,x)&&d(h,x,u(m,x));h.prototype=v,v.constructor=h,n("2aba")(i,p,h)}},c8bb:function(e,t,n){e.exports=n("54a1")},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);